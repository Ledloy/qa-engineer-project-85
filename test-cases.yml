- summary: |
    Успешная регистрация пользователя через email
  requirement: |
    Пользователь может зарегистрироваться через email
  prerequisites: |
    Открыта главная страница сайта https://codebattle.hexlet.io
  test-data: |
    Для регистрации имя, пароль, почту всегда берем уникальные
  steps:
    - Перейти с главной страницы на страницу регистрации https://codebattle.hexlet.io/users/new
    - Убедиться, что переход на страницу регистрации прошёл успешно
    - Ввести имя
    - Ввести email
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: >
    Пользователь успешно зарегистрирован и переадресован на
    страницу лобби, где отображается его профиль

- summary: |
    Неуспешная регистрация с паролем меньше минимальной длины
  requirement: |
    Проверка минимальной длины пароля
  prerequisites: |
    Пользователь не авторизован
  test-data: |
    Данные для проверки регистрации всегда берем уникальные
  steps:
    - Перейти на страницу регистрации
    - Ввести логин
    - Ввести пароль минимальной длины
    - Нажать кнопку "Submit"
  expected-result: |
    Отображается сообщение "Должно быть от 3 до 16 символов"

- summary: |
    Неуспешная регистрация с минимальной длиной логина
  requirement: |
    Проверка минимальной длины логина
  prerequisites: |
    Пользователь не авторизован
  test-data: |
    Данные для проверки всегда берем уникальные
  steps:
    - Перейти на страницу регистрации
    - Ввести логин минимальной длины
    - Ввести email
    - Ввести пароль
    - Нажать кнопку "Submit"
  expected-result: |
    Отображается сообщение "Должно быть от 3 до 16 символов"

- summary: |
    Неуспешная регистрация с существующим логином
  requirement: |
    Запрет дублирования логина
  prerequisites: |
    Логин уже занят другим пользователем
  test-data: |
    Существующий логин = CoolCoder
    Email = всегда уникальный
    Пароль = всегда уникальный
  steps:
    - Перейти на страницу регистрации
    - Ввести логин CoolCoder
    - Ввести email 
    - Ввести пароль 
    - Нажать кнопку "Submit"
  expected-result: |
    Отображается сообщение "Этот логин уже занят"

- summary: |
    Успешная регистрация через Discord
  requirement: |
    Регистрация пользователя через внешние провайдеры
  prerequisites: |
    Пользователь не авторизован
    У пользователя есть аккаунт Discord
  test-data: |
    Внешний провайдер = Discord
    Данные для регистрации соответствуют данным аккаунта Discord
  steps:
    - Перейти на страницу регистрации
    - Нажать "Sign up with Discord"
    - Авторизоваться в Discord
  expected-result: |
    Пользователь успешно перенаправлен на главную страницу и видит свой профиль

- summary: |
    Успешная регистрация через GitHub
  requirement: |
    Регистрация пользователя через внешние провайдеры
  prerequisites: |
    Пользователь не авторизован
    У пользователя есть аккаунт GitHub
  test-data: |
    Внешний провайдер = GitHub
    Данные для регистрации соответствуют данным от GitHub
  steps:
    - Перейти на страницу регистрации
    - Нажать "Sign up with GitHub"
    - Авторизоваться в GitHub
  expected-result: |
    Пользователь успешно перенаправлен на главную страницу и видит свой профиль

- summary: |
    Неуспешная регистрация с уже существующим email
  requirement: |
    Запрет дублирования аккаунтов по email
  prerequisites: |
    Пользователь с таким email уже зарегистрирован
  test-data: |
    Email = existing_user@example.com
    Пароль = всегда уникальный
    Состояние email = занят
  steps:
    - Перейти на страницу регистрации
    - Ввести email existing_user@example.com
    - Ввести пароль 
    - Нажать кнопку "Submit"
  expected-result: |
    Отображается сообщение "Пользователь с таким email уже существует"

- summary: |
    Неуспешная регистрация с пустыми полями формы
  requirement: |
    Проверка обязательных полей формы регистрации
  prerequisites: |
    Пользователь не авторизован
  test-data: |
    Email = [пустое значение]
    Пароль = [пустое значение]
    Обязательные поля = email, пароль
  steps:
    - Перейти на страницу регистрации
    - Оставить поля "Email" и "Пароль" пустыми
    - Нажать кнопку "Submit"
  expected-result: |
    Отображаются ошибки:
      - "Email обязателен для заполнения"
      - "Пароль обязателен для заполнения"
    Регистрация не выполнена

- summary: |
    Неуспешная авторизация с пустыми полями формы
  requirement: |
    Проверка обязательных полей формы авторизации
  prerequisites: |
    Пользователь не авторизован
  test-data: |
    Email = [пустое значение]
    Пароль = [пустое значение]
    Обязательные поля = email, пароль
  steps:
    - Перейти на страницу авторизации
    - Оставить поля "Email" и "Пароль" пустыми
    - Нажать кнопку "Submit"
  expected-result: >
    Отображаются ошибки:
      - "Email обязателен для заполнения"
      - "Пароль обязателен для заполнения"
    Авторизация не выполнена

- summary: |
    Успешная авторизация пользователя через GitHub
  requirement: |
    Авторизация пользователя через внешние провайдеры
  prerequisites: |
    Пользователь не авторизован
    У пользователя есть аккаунт GitHub, привязанный к его профилю на Codebattle
  test-data: |
    Внешний провайдер = GitHub
    Данные для авторизации соответствуют данным аккаунта GitHub
  steps:
    - Перейти на страницу авторизации
    - Нажать кнопку "Sign in with GitHub"
  expected-result: >
    Пользователь успешно авторизован и перенаправлен на главную страницу, где он видит свой профиль

- summary: |
    Успешная авторизация пользователя через Discord
  requirement: |
    Авторизация пользователя через внешние провайдеры
  prerequisites: |
    Пользователь не авторизован
    У пользователя есть аккаунт Discord, привязанный к его профилю на Codebattle
  test-data: |
    Внешний провайдер = Discord
    Данные авторизации соответствуют данным аккаунта Discord
  steps:
    - Перейти на страницу авторизации
    - Нажать кнопку "Sign in with Discord"
  expected-result: |
    Пользователь успешно авторизован и перенаправлен на главную страницу, где видит свой профиль

- summary: |
    Восстановление пароля через email
  requirement: |
    Восстановление пароля через email
  prerequisites: |
    Открыта страница восстановления пароля
    У пользователя есть аккаунт с email, привязанным к codebattle
  test-data: |
    Email = актуальная почта, привязанная к аккаунту codebattle
    Новый пароль = выбранный новый пароль
  steps:
    - Ввести email
    - Нажать кнопку "Submit"
    - Перейти по ссылке из письма
    - Ввести новый пароль
    - Нажать "Сохранить"
  expected-result: |
    Пароль успешно изменён

- summary: |
    Адаптация интерфейса для мобильных устройств
  requirement: |
    Интерфейс должен адаптироваться под мобильные устройства
  prerequisites: |
    Сайт открыт в браузере на ПК. Активирован режим DevTools (Mobile View)
  test-data: |
    Разрешение экрана 375x812 (смартфон)
  steps:
    - В DevTools выбрать разрешение 375x812 (смартфон)
    - Проверить расположение и отображение элементов интерфейса на главной странице сайта - url: "https://codebattle.hexlet.io"
    - Пройти авторизацию на сайте
    - Проверить расположение и отображение элементов интерфейса на странице - url: "https://codebattle.hexlet.io/#lobby после авторизации"
    - Проверить расположение и отображение элементов интерфейса на странице - url: "https://codebattle.hexlet.io/#tournaments после авторизации"
    - Проверить расположение и отображение элементов интерфейса на странице - url: "https://codebattle.hexlet.io/#completedGames после авторизации"
    - Проверить расположение и отображение элементов интерфейса на странице - url: "https://codebattle.hexlet.io/users после авторизации"
  expected-result: >
    Интерфейс корректно адаптируется под указанные разрешения.
    Все элементы отображаются правильно и доступны для взаимодействия.
- summary: |
    Кроссбраузерная совместимость
  requirement: |
    Сайт должен работать во всех популярных браузерах
  prerequisites: |
    Установлены Safari, Chrome, Firefox, Yandex
  test-data: >
    Браузеры = ["Safari 18", "Google Chrome 136.0.7103.49 (официальная сборка)", "Firefox 138.0.1", "Yandex 25.4.0.1973 (64-bit)"]
    Операционные системы = ["macOS 15 Sequoia", "Windows 11"]
    Разрешение экрана = ["1920x1080 (ПК)", "1280x800 (ПК)"]
  steps:
    - Открыть URL https://codebattle.hexlet.io/
    - Авторизоваться на сайте
    - Проверить отображение и выполнение действий на страницах сайта:
      - https://codebattle.hexlet.io/#lobby
      - https://codebattle.hexlet.io/#tournaments
      - https://codebattle.hexlet.io/#completedGames
      - https://codebattle.hexlet.io/users
  expected-result: |
    Сайт и страницы разделов отображаются корректно во всех браузерах.

- summary: |
    Использование HTTPS
  requirement: |
    Все данные передаются через защищённое соединение HTTPS
  prerequisites: |
    Открыта главная страница сайта
  test-data: |
    URL = https://codebattle.hexlet.io/
  steps:
    - Проверить использование HTTPS
  expected-result: |
    Все данные передаются через защищённое соединение

- summary: |
    Успешная защита от XSS-атак
  requirement: |
    Сайт должен быть защищён от XSS-атак
  prerequisites: |
    Открыта форма регистрации на сайте
  test-data: |
    Поле ввода имени = <u>Test</u>
  steps:
    - Ввести скрипт в поле ввода имени
    - Отправить форму
  expected-result: >
    Защита от XSS работает: сайт блокирует использование HTML-тегов
    в имени пользователя на этапе валидации

- summary: |
    Интуитивность интерфейса
  requirement: |
    Интерфейс должен быть интуитивно понятным
  prerequisites: |
    Открыта главная страница сайта
  test-data: |
    Путь навигации = Lobby → Create a game
  steps:
    - Проверить расположение элементов
    - Убедиться, что действия выполняются за 3 клика или меньше
  expected-result: |
    Интерфейс интуитивно понятен по всем критериям

- summary: |
    Отображение статистики пользователя
  requirement: >
    Отображение статистики: количество решённых задач, рейтинг, участие в соревнованиях
  prerequisites: |
    Пользователь авторизован
    У пользователя есть решённые задачи и участие в соревнованиях
  test-data: |
    Количество решённых задач
    Рейтинг
    Количество соревнований
  steps:
    - Перейти на страницу профиля
  expected-result: >
    На странице профиля корректно отображаются данные: количество
    решённых задач, рейтинг, список соревнований

- summary: |
    Успешное редактирование профиля пользователя
  requirement: |
    Редактирование профиля
  prerequisites: |
    Пользователь авторизован
    Открыта страница редактирования профиля
  test-data: |
    Новый никнейм = выбранный новый никнейм
  steps:
    - Ввести новый никнейм
    - Нажать кнопку "Сохранить"
  expected-result: |
    Профиль успешно обновлён

- summary: |
    Успешное переключение языка интерфейса в задаче
  requirement: |
    Переключение языка интерфейса в задаче
  prerequisites: |
    Открыта главная страница
  test-data: |
    Текущий язык = English
    Целевой язык = Русский
  steps:
    - Создать новую игру
    - Над описанием задачи из выпадающего списка выбрать "RU"
  expected-result: |
    Описание задачи корректно отображается на выбранном языке

- summary: |
    Успешное присоединение к созданной игре
  requirement: |
    Присоединение пользователей к созданным играм
  prerequisites: |
    Пользователь авторизован
    Существует созданная игра
  test-data: |
    Активная игра
  steps:
    - Выбрать активную игру
    - Нажать кнопку "Fight"
  expected-result: |
    Пользователь успешно присоединился к игре, отображается экран игры

- summary: |
    Работа таймера обратного отсчёта во время соревнования
  requirement: |
    Таймер обратного отсчёта во время соревнования
  prerequisites: |
    Пользователь присоединился к активной игре
  test-data: |
    Время до окончания = выбранный вариант при настройке параметров игры
  steps:
    - Присоединиться к существующей игре
  expected-result: >
    Отображается работающий таймер обратного отсчёта, который
    корректно отсчитывает оставшееся время

- summary: |
    Работа онлайн-редактора кода с подсветкой синтаксиса
  requirement: |
    Онлайн-редактор кода с подсветкой синтаксиса
  prerequisites: |
    Пользователь находится в игре
  test-data: |
    Язык программирования = выбранный язык программирования
  steps:
    - Открыть редактор кода
    - Ввести корректный код на выбранном языке
  expected-result: |
    Редактор кода поддерживает подсветку синтаксиса

- summary: |
    Просмотр истории прошлых игр и личного рейтинга
  requirement: |
    История прошлых игр
  prerequisites: |
    Пользователь участвовал в предыдущих играх
  test-data: |
    Количество завершённых игр
  steps:
    - Перейти на страницу профиля
    - Открыть вкладку "Статистика"
  expected-result: |
    Отображается список прошлых игр с результатами

- summary: |
    Корректное отображение редактора кода на мобильном устройстве
  requirement: |
    Корректное отображение редактора кода на небольших экранах
  prerequisites: |
    Открыта страница задачи на мобильном устройстве
  test-data: |
    Устройство = устройство с небольшим экраном
  steps:
    - Открыть редактор кода
  expected-result: >
    Редактор кода корректно отображается, поддерживает
    редактирование, масштабирование и подсветку синтаксиса

- summary: |
    Упрощённый интерфейс для мобильных устройств
  requirement: |
    Упрощённый интерфейс для мобильных устройств
  prerequisites: |
    Открыта страница профиля на мобильном устройстве
  test-data: |
    Устройство = устройство с небольшим экраном
  steps:
    - Перейти на страницу профиля
  expected-result: |
    Интерфейс упрощён, основные элементы легко доступны

- summary: |
    Проверка кнопки "Run" для проверки решения
  requirement: |
    Кнопка "Run" доступна и запускает проверку решения
  prerequisites: |
    Пользователь авторизован, в активном баттле
  test-data: |
    Решение задачи (любое)
  steps:
    - Написать корректное решение
    - Нажать кнопку "Run"
    - Дождаться завершения проверки
  expected-result: |
    Проверка запустилась, результат проверки отображается корректно

- summary: |
    Возможность игры против "Бота"
  requirement: |
    Пользователь должен иметь возможность играть против бота.
  prerequisites: |
    Пользователь авторизован в системе
    Открыта главная страница (Лобби)
  test-data: |
    Соперник = бот
  steps:
    - Нажать кнопку "Create a game"
    - Нажать кнопку "With a bot"
    - Нажать кнопку "Create battle"
    - Происходит переход в интерфейс игры, где отображается никнейм бота и его окно с кодом
  expected-result: >
    - Успешно создан баттл против бота
    - Бот отображается как второй игрок
    - Задача загружена

- summary: |
    Проверка на неограниченное количество попыток проверки решения
  requirement: |
    Неограниченное количество попыток проверки решения
  prerequisites: |
    Пользователь авторизован, в активном баттле
  test-data: |
    Решение задачи (любое)
  steps:
    - Написать решение (любое)
    - Нажать "Run"
    - Повторить нажатие 5–7 раз подряд
  expected-result: |
    Каждое нажатие запускает проверку, результаты отображаются, блокировок или сообщений о лимите нет

- summary: |
    Переподключение к баттлу после отключения
  requirement: |
    Игрок может переподключиться в игру, если вылетел
  prerequisites: |
    Начат баттл между двумя игроками
  test-data: |
    Активный баттл
  steps:
    - Закрыть вкладку браузера (имитация вылета)
    - Через 1–2 минуты снова открыть сайт
    - На главной странице (лобби) нажать кнопку "Continue"
    - Если время не закончилось и второй игрок не ввёл правильное решение, таймер продолжает корректно отсчитывать время
  expected-result: >
    Можно вернуться в активный баттл и продолжить игру

- summary: |
    Проверка интерфейса после победы в баттле
  requirement: |
    После победы игроку должно быть показано сообщение о победе, а также должны быть доступны кнопки "Rematch" и "Back to Home".
  prerequisites: |
    Пользователь авторизован и участвует в баттле
  test-data: |
    Корректное решение задачи
  steps:
    - Написать и отправить корректное решение
    - Нажать кнопку "Run" для проверки решения
    - Проверить, что появилось сообщение "Yay! All tests passed!!!" в секции OUTPUT
    - Проверить, что для победителя доступны кнопки "Rematch" и "Back to Home"
  expected-result: |
    После успешной проверки решения:
    - В секции OUTPUT появляется сообщение "Yay! All tests passed!!!"
    - На экране появляется надпись "You have won the game!"
    - Для победителя доступны кнопки "Rematch" и "Back to Home"

- summary: |
    Деактивация кнопки "Run" после победы
  requirement: |
    Кнопка "Run" у победителя более неактивна
  prerequisites: |
    Пользователь является победителем в завершённом баттле
  test-data: |
    Завершённый баттл, в котором пользователь победил
  steps:
    - Дождаться завершения баттла (статус "Победа")
    - Не нажимать "Back to Home"
    - Нажать кнопку "Run"
  expected-result: |
    Кнопка "Run" отображается как неактивная, клик по ней не запускает проверку

- summary: |
    Проверка интерфейса для проигравшего игрока после победы противника
  requirement: |
    После победы одного из игроков, проигравший должен видеть информацию о поражении и иметь возможность начать новую игру или вернуться на главную страницу.
  prerequisites: |
    Пользователь авторизован и участвует в баттле
  test-data: |
    Решение, которое не проходит тесты
  steps:
    - Не писать решение или написать неверное/неполное решение
    - Дождаться, пока противник отправит корректное решение и выиграет
    - Проверить, что появилось сообщение "PlayerX has won the game!"
    - Проверить, что доступны кнопки "Rematch" и "Back to Home"
  expected-result: >
    Проигравший игрок:
    - Видит сообщение о победе противника в чате
    - Видит баннер "GAME_OVER"
    - Может нажать "Rematch" или "Back to Home"

- summary: |
    Проверка функциональности кнопки "Rematch" после завершения баттла
  requirement: |
    После завершения баттла оба игрока (победитель и проигравший) могут начать новую игру, нажав кнопку "Rematch".
  prerequisites: |
    Пользователь авторизован и находится в завершённом баттле
  test-data: |
    Завершённый баттл
  steps:
    - Дождаться завершения баттла
    - Найти кнопку "Rematch" на экране
    - Нажать кнопку "Rematch"
    - Дождаться перехода в новый баттл
  expected-result: >
    После нажатия "Rematch":
    - Пользователь переходит в новый баттл
    - Противник тот же
    - Генерируется новая задача
    - Интерфейс редактора и таймер сбрасываются
    - Кнопка "Run" снова активна

- summary: |
    Проверка функциональности кнопки "Back to Home" после завершения баттла
  requirement: |
    После завершения баттла игрок может вернуться на главную страницу, нажав кнопку "Back to Home".
  prerequisites: |
    Пользователь авторизован и находится в завершённом баттле
  test-data: |
    Завершённый баттл
  steps:
    - Дождаться завершения баттла
    - Найти кнопку "Back to Home"
    - Нажать кнопку "Back to Home"
    - Дождаться перехода на страницу лобби
  expected-result: >
    После нажатия:
    - Происходит переход на главную страницу (лобби)
    - Отображаются разделы Lobby, Tournaments, History и кнопка "Create a game"

- summary: |
    Проверка автоматического восстановления баттла при обновлении страницы
  requirement: |
    При случайном обновлении страницы (F5) пользователь остаётся в баттле, код не теряется
  prerequisites: |
    Активный баттл
  test-data: |
    Решение задачи (любое)
  steps:
    - Написать часть кода
    - Обновить страницу (F5)
  expected-result: >
    - Пользователь остаётся в баттле (перехода никуда не происходит)
    - Код в редакторе сохранён
    - Таймер продолжает идти
